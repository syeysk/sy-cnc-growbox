# Список команд гроубокса

Параметры:
- `V` - значение датчика либо исполнительного устройства
- `A` - код исполнительного устройства
- `S` - код датчика
- `P` - номер периода
- `D` - длительность
- `B` - булево значение: 1 - истина, 0 - ложь.


## Прочее

- [x] `E10` — возвращает OK.

## Рабочая поверхность

- [ ] `S10` - возвращает список рабочих поверхностей
- [ ] `S11 <desk>` - возвращает точки поверхности `desk`. Точки указаны в милиметрах, выглядят как `XN YN ZN`
- [ ] `S12 <desk> <height> <point1> <pointN>` — добавляет точки поверхности `desk`
- [ ] `S13 <desk> <height> <point1> <pointN>` — редактирует точки существующей поверхности `desk`

## Добавление датчиков и исполнительных устройств

- [ ] `S0 <model_actuator> <type> <protocol> <address>` - добавляет исполнительное устройство типа `model_actuator` с протоколом `protocol` и адресом `address`. Возвращает назначенный устройству номер. `type` - параметр микроклимата, с которым работает устройство. 
- [ ] `S1 <model_sensor> <type> <protocol> <address>` - добавляет датчик типа `model_sensor` с протоколом `protocol` и адресом `address`.  Возвращает назначенный датчику номер. `type` - параметр микроклимата, который измеряет датчик
- [ ] `S2 <actuator> <protocol> <address>` - обновляет протокол `protocol` и адрес `address` исполнительного устройства с номером `actuator`.
- [ ] `S3 <sensor> <protocol>  <address>` - обновляет протокол `protocol` и адрес `address` датчика с номером `sensor`.
- [ ] `S4 <actuator>` - возвращает данные исполнительного устройства `actuator`, установленные командой `S0` или `S2`
- [ ] `S5 <sensor>` - возвращает данные датчика `sensor`, установленные командой `S1` или `S3`
- [ ] `S6 <actuator>` - удаляет исполнительное устройство `actuator`
- [ ] `S7 <sensor>` - удаляет датчик `sensor`
- [ ] `S8` - возвращает список исполнительных устройств
- [ ] `S9` - возвращает список датчиков

Измеряемые параметры датичка или изменяемые параметры исполнительного устройства определяются по его типу. Например, для датчика DHT - это температура и влажность, для обогревателя - температура.

Поддерживаемые протоколы:
- цифровой вывод — адресом выступает номер порта. Значение подаётся напрямую в функции write/read
- аналоговый вывод — адресом выступает номер порта. Значение подаётся напрямую в функции analogWrite/analogRead
- 1-Wire – адресом выступает номер порта
- I2C – адресом выступает адрес устройства на шине.

## Управление датчиками и исполнительными устройствами

- [x] `E0 A<actuator> V<value>` - устанавливает значение `value` на исполнительном устройстве `actuator`.
- [ ] `E1 <actuator>` - возвращает значение, установленное на исполнительном устройстве `actuator`
- [x] `E2 S<sensor>` - возвращает значение с датчика `sensor`
- [ ] `E3` - выключает автоматику для всех исполнительных устройств
- [ ] `А3 <sensor> <actuator>` - значение (установленное командой `E1`) на исполнительном устройстве `actuator` будет подстраиваться на основании значения с датчика `sensor`. Датчик и исполнительное устройство обязаны быть одного типа

## Циклическая автоматика с резким переключением периода

- [x] `E100 A<actuator> B<off_or_on>` - включает/отключает автоматику для исполнительного устройства `actuator`
- [x] `E1001 A<actuator>` - возвращает 1, если автоматика для исполнительного устройства `actuator` включена , иначе - 0.
- [x] `E101 A<actuator> B<part_of_period> <duration>` - устанавливает длительность периода `duration` для исполнительного устройства `actuator`. `part_of_period` - равен 1 для длительности включённого состояния, равен 0 для длительности отключённого состояния
- [x] `E1011 A<actuator> B<part_of_period>` - возвращает длительность периода `part_of_period`, установленную командой `E101`
- [x] `E102 A<actuator>` - возвращает текущее период и сколько уже он длится в минутах
- [x] `E103 A<actuator> B<part_of_period> V<value>` - устанавливает значение `value` исполнительного устройства для периода `part_of_period`.
- [x] `E1031 A<actuator> B<part_of_period>` - возвращает значение `value` для периода `part_of_period`.

## Циклическая автоматика с плавной сменой периода

- [x] `E150 A<actuator> B<off_or_on>` - включает/отключает автоматику
- [x] `E1501 A<actuator>` - возвращает 1, если автоматика для исполнительного устройства `actuator` включена , иначе - 0.
- [x] `E151 A<actuator> P<part_of_day> D<duration>` - устанавливает световую длительность `duration` времени суток `part_of_day` в минутах. Времён суток всего 4: рассвет - 2, день - 1, закат - 3, ночь - 0.
- [x] `E1511 A<actuator> P<part_of_day>` - возвращает длительность времени суток `part_of_day`, установленную командой `E151`
- [x] `E152 A<actuator>` - возвращает текущее время суток и сколько уже оно длится в минутах
- [x] `E153 A<actuator> P<part_of_day> V<value_lumen>` - устанавливает уровень освещённости `value_lumen` для времени суток `part_of_day`. Допустимы следующие времена суток: день, ночь. Температура для рассвета и заката расчитывается автоматически и является плавным переходом между днём и ночью.
- [x] `E1531 A<actuator> P<part_of_day>` - возвращает уровень освещённости `value_lumen` для времени суток `part_of_day`.

## Условная автоматика климат-контроля

- [x] `E200 A<actuator> B<off_or_on>` - включает/отключает автоматику
- [x] `E2001 A<actuator>` - возвращает 1, если автоматика для исполнительного устройства `actuator` включена , иначе - 0.
- [x] `E201 A<actuator> S<sensor>` - привязывает датчик `sensor` к исполнительному устройству `actuator`.
- [x] `E2011 A<actuator>` - возвращает датчик, привязанный командой `E201`.
- [x] `E202 A<actuator> V<min_value>` - устанавливает минимальное допустимое значение на привязанном сенсоре, при котором автоматика включит исполнительное устройство.
- [x] `E2021 A<actuator>` - возвращает минимальное допустимое значение, установленное командой `E202`.
- [x] `E203 A<actuator> V<max_value>` - устанавливает максимальное допустимое значение на привязанном сенсоре, при котором автоматика выключит исполнительное устройство.
- [x] `E2031 A<actuator>` - возвращает максимальное допустимое значение, установленное командой `E203`.

## Температура

Буква T означает Temperature

- [ ] `T1 <for_what> <part_of_day> <value_celci>` - устанавливает температуру `value_celci` для времени суток `part_of_day`. Время суток может быть любым. Параметр `for_what` указывает на категорию температуры: окружающего воздуха - 1, грунта - 2.

## Показатели окружающей среды снаружи гроубокса

Буква E означает External

- `E1` - возвращает температуру
- `E2` - возвращает освещённость
- `E3` - возвращает влажность
- `E4` - возвращает уровень CO2
- `E5` - возвращает уровень кислорода
- `E6` -  возвращает скорость ветра (измеряется анемометром)